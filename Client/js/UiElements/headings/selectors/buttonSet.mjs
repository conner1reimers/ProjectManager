import { Template } from "../../static/template.mjs";

export class ButtonSet {

    static template = Template.createTemplate(`<div class="heading-button-set"></div>`);

    element;

    constructor(buttons) {
        this.element = Template.createElement(ButtonSet.template); 
        if(buttons) {
            if(Array.isArray(buttons[0])) // Set of button paramerers
                buttons.forEach((buttonParams) => { if(buttonParams){ this.appendButton(new Button(...buttonParams)); } } );
            else if(typeof buttons[0] === 'object')
                buttons.forEach((buttonObj) => { this.appendButton(buttonObj); });
        }
    }

    appendButton(button) { 
        if(Array.isArray(button))
            button.forEach((but) => { this.element.append(but.element); });
        else
            this.element.append(button.element); 
    }
}

export class Button {

    static icons = {
        add: '<svg viewBox="0 0 512 512"><path d="M263.2,512h-13.5c-17.6,0-32-14.3-32-32l0-448.1c0-17.6,14.3-32,32-32l13.5,0c17.6,0,32,14.3,32,32l0,448.1C295.2,497.7,280.9,512,263.2,512z"/><path d="M511.7,249.5V263c0,17.6-14.3,32-32,32l-448.1,0c-17.6,0-32-14.3-32-32l0-13.5c0-17.6,14.3-32,32-32l448.1,0C497.4,217.5,511.7,231.8,511.7,249.5z"/></svg>',
        edit: '<svg viewBox="0 0 512 512"><path d="M92.2,431.1c5.1,0,6.1-0.5,10.8-1.5l92.2-18.4c9.7-2.6,19.5-7.2,27.1-14.8l223.2-223.2c34.3-34.3,34.3-93.2,0-127.5l-18.9-20c-34.3-34.3-93.7-34.3-128,0L75.3,249.3c-7.2,7.2-12.3,17.4-14.8,27.1L41,369.7c-2.6,17.4,2.6,34.3,14.8,46.6C65.5,426,79.9,431.1,92.2,431.1L92.2,431.1z M109.6,286.2L332.8,62.5c14.8-14.8,42-14.8,56.3,0l19.5,19.5c17.4,17.4,17.4,42,0,58.9L185.9,364.5l-94.7,15.9L109.6,286.2z"/><path d="M443.4,462.8H65.5c-14.8,0-24.6,9.7-24.6,24.6c0,14.8,12.3,24.6,24.6,24.6h375.8c14.8,0,27.1-9.7,27.1-24.6C468,472.6,455.7,462.8,443.4,462.8z"/></svg>',
        filter: '<svg viewBox="0 0 389.3 389.3"><path d="M389.3,24.3c0-11.8-9.6-21.3-21.3-21.3H21.3c-4.4,0-8.7,1.4-12.3,3.9c-9.6,6.8-12,20.1-5.2,29.7l125.7,178.7l0.4,130c0,8.1,2.4,16,6.9,22.8c12.7,19,38.3,24.1,57.3,11.5l44.9-29.9c11.9-8,19.1-21.4,19-35.7l-0.5-97.8L385.4,36.6C388,33,389.3,28.7,389.3,24.3z M214.9,202.5l0.5,111.6l-42.8,28.5l-0.4-140.9L62.4,45.6h264.2L214.9,202.5z"/></svg>',
        sort: '<svg viewBox="0 0 460.1 460.1"><path d="M25.6,139.9h257.5V88.8H25.6C11.4,88.8,0,100.2,0,114.3S11.4,139.9,25.6,139.9z"/><path d="M25.6,242.4h257.5v-51.1H25.6C11.4,191.3,0,202.8,0,216.9C0,231,11.4,242.4,25.6,242.4z"/><path d="M25.6,293.9L25.6,293.9C11.4,293.9,0,305.3,0,319.4S11.4,345,25.6,345h178.9c-2-6.2-3.1-12.8-3.1-19.5c0-11.3,3-22.1,8.5-31.6L25.6,293.9L25.6,293.9z"/><path d="M450.6,302.6c-12.6-12.6-33.1-12.6-45.7,0l-26.5,26.5V52.9c0-17.8-14.5-32.3-32.3-32.3s-32.3,14.5-32.3,32.3v276.2l-26.5-26.5c-12.6-12.6-33.1-12.6-45.7,0c-12.6,12.6-12.6,33.1,0,45.7l81.7,81.7c12.6,12.6,33.1,12.6,45.7,0l81.7-81.7C463.2,335.7,463.2,315.2,450.6,302.6z"/></svg>',
        next: '<svg viewBox="0 0 492 492"><path d="M382.7,226.8L163.7,7.9c-5.1-5.1-11.8-7.9-19-7.9s-14,2.8-19,7.9L109.5,24c-10.5,10.5-10.5,27.6,0,38.1l183.9,183.9L109.3,430c-5.1,5.1-7.9,11.8-7.9,19c0,7.2,2.8,14,7.9,19l16.1,16.1c5.1,5.1,11.8,7.9,19,7.9s14-2.8,19-7.9L382.7,265c5.1-5.1,7.9-11.9,7.8-19.1C390.5,238.7,387.8,231.9,382.7,226.8z"/></svg>',
        prev: '<svg style="transform: rotate(180deg)" viewBox="0 0 492 492"><path d="M382.7,226.8L163.7,7.9c-5.1-5.1-11.8-7.9-19-7.9s-14,2.8-19,7.9L109.5,24c-10.5,10.5-10.5,27.6,0,38.1l183.9,183.9L109.3,430c-5.1,5.1-7.9,11.8-7.9,19c0,7.2,2.8,14,7.9,19l16.1,16.1c5.1,5.1,11.8,7.9,19,7.9s14-2.8,19-7.9L382.7,265c5.1-5.1,7.9-11.9,7.8-19.1C390.5,238.7,387.8,231.9,382.7,226.8z"/></svg>',
        confirm: '<svg viewBox="0 0 512 512"><path d="M463.4,73.8c-7.8-7.8-20.6-7.8-28.4,0L198.6,310.1L76.9,187.6c-7.8-7.9-20.5-7.9-28.4,0L5.9,230.2c-7.8,7.8-7.8,20.6,0,28.4l178.5,179.6c7.8,7.8,20.5,7.8,28.4,0l293.3-293.4c7.9-7.8,7.9-20.7,0-28.5L463.4,73.8z"></path></svg>',
        cancel: '<svg viewBox="0 0 512 512"><path d="M340.3,258.4c-1.3-1.3-1.3-3.5,0-4.8L501.5,92.3c13.8-13.8,13.8-36.2,0-50l-32-32C462.9,3.7,454,0,444.6,0c-9.4,0-18.3,3.7-25,10.4L258.4,171.6c-0.8,0.8-1.7,1-2.4,1c-0.6,0-1.6-0.2-2.4-1L92.4,10.4C85.8,3.7,76.9,0,67.4,0s-18.3,3.7-25,10.4l-32,32c-13.8,13.8-13.8,36.2,0,50l161.2,161.3c1.3,1.3,1.3,3.5,0,4.8L10.5,419.7c-13.8,13.8-13.8,36.2,0,50l32,32c6.7,6.7,15.6,10.4,25,10.4s18.3-3.7,25-10.4l161.2-161.3c0.8-0.8,1.7-1,2.4-1c0.6,0,1.6,0.2,2.4,1l161.2,161.3c6.7,6.7,15.6,10.4,25,10.4c9.4,0,18.3-3.7,25-10.4l32-32c13.8-13.8,13.8-36.2,0-50L340.3,258.4z"></path></svg>',
        timecard: '<svg viewBox="0 0 512 512"><path d="M207,479.4c-1,0-2-0.1-3.1-0.2c-56.3-8.7-107.9-37.3-145.3-80.6C20.8,354.9,0,298.9,0,241c0-64.4,25.1-124.9,70.6-170.4S176.6,0,241,0c58.7,0,115.2,21.3,159.2,60c43.6,38.4,71.9,91,79.6,148.3c1.5,10.9-6.2,21-17.1,22.5c-11,1.5-21-6.2-22.5-17.1C426.7,114.7,341.1,40,241,40C130.2,40,40,130.2,40,241c0,98.3,73.1,183.7,170.1,198.6c10.9,1.7,18.4,11.9,16.7,22.8C225.2,472.3,216.7,479.4,207,479.4z M181.2,330l74-75c3.7-3.7,5.8-8.8,5.8-14V92c0-11-9-20-20-20c-11,0-20,9-20,20v140.8L152.8,302c-7.8,7.9-7.7,20.5,0.2,28.3c3.9,3.8,9,5.8,14,5.8C172.2,336,177.3,334,181.2,330L181.2,330z M511.7,401.6c2-10.9-5.2-21.3-16-23.3c-10.9-2-21.3,5.2-23.3,16c-8.3,45-47.6,77.6-93.4,77.6c-52.4,0-95-42.6-95-95s42.6-95,95-95c8.7,0,17.3,1.2,25.6,3.5c10.6,3,21.7-3.2,24.6-13.9c3-10.6-3.2-21.7-13.9-24.6c-11.8-3.3-24-5-36.4-5c-74.4,0-135,60.6-135,135s60.6,135,135,135C444,512,499.9,465.6,511.7,401.6L511.7,401.6z M403.6,411.7l87.4-86.5c7.9-7.8,7.9-20.4,0.1-28.3c-7.8-7.9-20.4-7.9-28.3-0.1l-83.9,83l-25.9-25.9c-7.8-7.8-20.5-7.8-28.3,0s-7.8,20.5,0,28.3l29.4,29.4c6.8,6.8,15.8,10.2,24.7,10.2C387.9,421.8,396.8,418.4,403.6,411.7L403.6,411.7z"/></svg>',
        report: '<svg viewBox="0 0 32 32"><rect height="12" rx="1" width="8" x="2" y="18"/><rect height="20" rx="1" width="8" x="22" y="10"/><rect height="28" rx="1" width="8" x="12" y="2"/></svg>'
    };

    static template = Template.createTemplate(`
        <div slot="button" class="heading-button">
            <svg slot="icon"></svg>
            <p slot="label"></p>
        </div>
    `);

    element;

    constructor(icon, onClick, text, managerView = false, openRight = false) {
        this.element = Template.createElement( 
            Button.template, 
            { 
                'button': {
                    addClasses: managerView ? ['manager-view'] : undefined
                },
                'icon': { 
                    outerHTML: icon
                },
                'label': { 
                    innerHTML: text,
                    addClasses: [openRight ? 'openRight' : 'openLeft']
                }
            } 
        );

        this.label = this.element.querySelector('[slot=label]');
        this.icon = this.element.querySelector('svg');
        setTimeout(() => {
            this.icon.classList.add(openRight ? 'openRight' : 'openLeft');
            document.addEvents(this.icon, {
                'click': onClick,
                'mouseenter': text ? this.onMouseEnter.bind(this) : null,
                'mouseleave': text ? this.onMouseExit.bind(this) : null,
            });
        }, 0)
    }

    onMouseEnter() {
        this.element.css('width', this.label.offsetWidth + 'px');
    }

    onMouseExit() {
        this.element.css('width', '30px');
    }

    setDisabled(disable) {
        if(disable)
            this.element.classList.add('disabled');
        else
            this.element.classList.remove('disabled');
    }

    addEventListener(type, event) {
        this.icon.addEventListener(type, event);
    }

}


